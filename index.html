<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agente de Viajes </title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <!-- Modal de llaves -->
  <div id="keysModal" class="modal visible">
    <div class="modal-card">
      <h2>Configura tus API Keys</h2>
      <p class="muted">Se guardan en tu navegador (sessionStorage) y se env√≠an por HTTPS cuando solicitas itinerarios/chat. No se persisten en el servidor.</p>
      <label>GROQ_API_KEY</label>
      <input id="groqKey" type="password" placeholder="gsk_..." />
      <label>SERPAPI_API_KEY (opcional)</label>
      <input id="serpKey" type="password" placeholder="xxxxxx" />
      <button id="saveKeys">Guardar y continuar</button>
    </div>
  </div>

  <header>
    <h1>‚úàÔ∏è Agente de Viajes</h1>
    <div class="controls">
      <button id="openKeys">üîê API Keys</button>
      <!-- ‚úÖ corregido -->
      <a href="/api/health" target="_blank" class="link">health</a>
    </div>
  </header>

  <main>
    <section class="planner">
      <h2>Crear itinerario</h2>
      <form id="planForm">
        <div class="row">
          <label>Destino</label>
          <input name="city" placeholder="Ej. Medell√≠n" required />
        </div>
        <div class="row">
          <label>D√≠as</label>
          <input name="days" type="number" min="1" max="14" value="3" required />
        </div>
        <div class="row">
          <label>Fecha de inicio (opcional)</label>
          <input name="start_date" type="date" />
        </div>
        <div class="row">
          <label>Idioma</label>
          <select name="language">
            <option value="es" selected>Espa√±ol</option>
            <option value="en">English</option>
          </select>
        </div>
        <button type="submit">üöÄ Generar</button>
      </form>
      <div id="planOutput" class="card hidden"></div>
      <div id="downloadBtns" class="row hidden">
        <button id="dlTxt">‚¨áÔ∏è Descargar .txt</button>
        <button id="dlIcs">‚¨áÔ∏è Descargar .ics</button>
      </div>
    </section>

    <section class="chat">
      <h2>Chat</h2>
      <div id="chatBox" class="chat-box"></div>
      <form id="chatForm" class="chat-form">
        <input id="chatInput" placeholder="Escribe tu solicitud de viaje..." />
        <button>Enviar</button>
      </form>
    </section>
  </main>

  <footer>
    <small>Hecho con FastAPI + Groq + SerpAPI en Vercel.</small>
  </footer>

  <script src="/script.js"></script>
</body>
</html>
